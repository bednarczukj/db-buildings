---
// Test page to check if basic Cloudflare Pages Functions work
console.log("ðŸ§ª SERVER: Test page server-side execution started");
console.log("ðŸ§ª SERVER: Timestamp:", new Date().toISOString());
console.log("ðŸ§ª SERVER: Environment:", {
  NODE_ENV: process.env.NODE_ENV,
  CF_PAGES: process.env.CF_PAGES,
  userAgent: Astro.request.headers.get("user-agent"),
});
console.log("ðŸ§ª SERVER: Available env vars:", {
  SUPABASE_URL: !!process.env.SUPABASE_URL,
  PUBLIC_SUPABASE_KEY: !!process.env.PUBLIC_SUPABASE_KEY,
  SUPABASE_SERVICE_ROLE_KEY: !!process.env.SUPABASE_SERVICE_ROLE_KEY,
  OPENROUTER_API_KEY: !!process.env.OPENROUTER_API_KEY,
  PUBLIC_ENV_NAME: !!process.env.PUBLIC_ENV_NAME,
});
console.log("ðŸ§ª SERVER: SUPABASE_URL value:", process.env.SUPABASE_URL || "NOT_SET");
console.log("ðŸ§ª SERVER: PUBLIC_SUPABASE_KEY value:", process.env.PUBLIC_SUPABASE_KEY ? "[SET]" : "NOT_SET");
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test strony</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Test Cloudflare Pages Functions</h1>
      <p>JeÅ›li widzisz tÄ™ stronÄ™, podstawowa funkcjonalnoÅ›Ä‡ dziaÅ‚a!</p>
      <p>Problem moÅ¼e byÄ‡ z:</p>
      <ul>
        <li>Layout.astro (async operacje)</li>
        <li>Tailwind CSS</li>
        <li>Supabase client</li>
      </ul>
      <a href="/" style="color: blue; text-decoration: underline;">WrÃ³Ä‡ do strony gÅ‚Ã³wnej</a>
    </div>

    <script>
      /* eslint-disable no-console, prettier/prettier */
      console.log("ðŸ§ª CLIENT: Test page client-side loaded");
      console.log("ðŸ§ª CLIENT: Timestamp:", new Date().toISOString());
      console.log("ðŸ§ª CLIENT: User agent:", navigator.userAgent);
      console.log("ðŸ§ª CLIENT: URL:", window.location.href);

      // Dodaj widoczny znacznik Å¼e JavaScript dziaÅ‚a
      const debugDiv = document.createElement("div");
      debugDiv.style.cssText =
        "background: #e8f5e8; border: 1px solid #4caf50; padding: 10px; margin: 10px 0; border-radius: 4px;";
      debugDiv.innerHTML = "<strong>âœ… JavaScript dziaÅ‚a!</strong> SprawdÅº konsolÄ™ przeglÄ…darki (F12) po wiÄ™cej logÃ³w.";
      document.querySelector(".container").appendChild(debugDiv);
      /* eslint-enable no-console, prettier/prettier */
    </script>
  </body>
</html>
